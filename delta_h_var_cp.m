function [delta_h_var_cp] = delta_h_var_cp(T1, T2)
%For variable Cp, delta h varies based on the temperature. You can get
%these values from NIST and plug them in here...
%at 100 - 500K for N2 and 700K for O2
N_500 = [28.98641, 1.853978, -9.647459, 16.63537, 0.000117, -8.671914, 226.4168, 0];
O_700 = [31.32234, -20.23531, 57.865644, -36.50624, -0.007374, -8.903471, 246.7945, 0];

N_2000 = [19.50583, 19.88705, -8.598535, 1.369784, 0.527601, -4.935202, 212.39, 0];
O_2000 = [30.03235, 8.772972, -3.988133, 0.788313, -0.741599, -11.32468, 236.1663, 0];

N_6000 = [35.51872, 1.128728, -0.196103, 0.014662, -4.553760, -18.97091, 224.9810, 0];
O_6000 = [20.91111, 10.72071, -2.020498, 0.146449, 9.245722, 5.337651, 237.6185, 0];

%Start with enthalpy of Nitrogen at T2 and T1
t1 = T1/1000;
if t1 <= .500
    h1n = N_500(1)*t1 + N_500(2)*t1^2/2 + N_500(3)*t1^3/3 + N_500(4)*t1^4/4 - N_500(5)/t1 + N_500(6);
elseif t1 <= 2
    h1n = N_2000(1)*t1 + N_2000(2)*t1^2/2 + N_2000(3)*t1^3/3 + N_2000(4)*t1^4/4 - N_2000(5)/t1 + N_2000(6);
elseif t1 <= 6
    h1n = N_6000(1)*t1 + N_6000(2)*t1^2/2 + N_6000(3)*t1^3/3 + N_6000(4)*t1^4/4 - N_6000(5)/t1 + N_6000(6);
end

t2 = T2/1000;
if t2 <= .500
    h2n = N_500(1)*t2 + N_500(2)*t2^2/2 + N_500(3)*t2^3/3 + N_500(4)*t2^4/4 - N_500(5)/t2 + N_500(6);
elseif t2 <= 2
    h2n = N_2000(1)*t2 + N_2000(2)*t2^2/2 + N_2000(3)*t2^3/3 + N_2000(4)*t2^4/4 - N_2000(5)/t2 + N_2000(6);
else
    h2n = N_6000(1)*t2 + N_6000(2)*t2^2/2 + N_6000(3)*t2^3/3 + N_6000(4)*t2^4/4 - N_6000(5)/t2 + N_6000(6);
end

%Now we can find the enthalpy of Oxygen at T2 and T1

if t1 < .700
    h1o = O_700(1)*t1 + O_700(2)*t1^2/2 + O_700(3)*t1^3/3 + O_700(4)*t1^4/4 - O_700(5)/t1 + O_700(6);
elseif t1 < 2
    h1o = O_2000(1)*t1 + O_2000(2)*t1^2/2 + O_2000(3)*t1^3/3 + O_2000(4)*t1^4/4 - O_2000(5)/t1 + O_2000(6);
elseif t1 < 6
    h1o = O_6000(1)*t1 + O_6000(2)*t1^2/2 + O_6000(3)*t1^3/3 + O_6000(4)*t1^4/4 - O_6000(5)/t1 + O_6000(6);
end

if t2 <= .700
    h2o = O_700(1)*t2 + O_700(2)*t2^2/2 + O_700(3)*t2^3/3 + O_700(4)*t2^4/4 - O_700(5)/t2 + O_700(6);
elseif t2 <= 2
    h2o = O_2000(1)*t2 + O_2000(2)*t2^2/2 + O_2000(3)*t2^3/3 + O_2000(4)*t2^4/4 - O_2000(5)/t2 + O_2000(6);
elseif t2 <= 6
    h2o = O_6000(1)*t2 + O_6000(2)*t2^2/2 + O_6000(3)*t2^3/3 + O_6000(4)*t2^4/4 - O_6000(5)/t2 + O_6000(6);
end

%Next we can directly find the enthalpy change

[delta_h_var_cp] = (.79*(h2n-h1n) + .21*(h2o-h1o))*1000/.029;%joules/kg

